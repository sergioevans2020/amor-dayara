<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Minijuego Amor: Salta el Corazón Kawaii 💖</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@600&display=swap');

  body {
    margin: 0;
    background: linear-gradient(135deg, #ffdde1, #ee9ca7);
    font-family: 'Quicksand', sans-serif;
    overflow-x: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }

  #game-container {
    position: relative;
    width: 100vw;
    max-width: 600px;
    height: 200px;
    background: #ffe6f0;
    border-radius: 15px;
    box-shadow: 0 8px 16px rgba(255, 20, 60, 0.3);
    overflow: hidden;
  }

  #ground {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 20px;
    background: #d63384;
  }

  #heart {
    position: absolute;
    bottom: 20px;
    left: 50px;
    width: 50px;
    height: 50px;
    background: #ff4d94;
    transform: rotate(45deg);
    border-radius: 15px 15px 15px 15px;
    animation: heart-beat 1.2s infinite;
    cursor: pointer;
  }

  #heart::before,
  #heart::after {
    content: "";
    position: absolute;
    width: 50px;
    height: 50px;
    background: #ff4d94;
    border-radius: 50%;
  }

  #heart::before {
    top: -25px;
    left: 0;
  }

  #heart::after {
    left: 25px;
    top: 0;
  }

  /* Ojos kawai */
  #eye-left, #eye-right {
    position: absolute;
    background: white;
    border-radius: 50%;
    width: 10px;
    height: 14px;
    top: 15px;
  }
  #eye-left {
    left: 10px;
  }
  #eye-right {
    right: 10px;
  }
  #eye-left::after, #eye-right::after {
    content: "";
    position: absolute;
    background: black;
    width: 5px;
    height: 7px;
    border-radius: 50%;
    top: 3px;
    left: 2px;
  }

  /* Obstacle */
  .obstacle {
    position: absolute;
    bottom: 20px;
    right: -30px;
    width: 30px;
    height: 50px;
    background: #d63384;
    border-radius: 8px;
    animation: obstacle-move 2.5s linear infinite;
  }

  @keyframes obstacle-move {
    0% { right: -30px; }
    100% { right: 100%; }
  }

  @keyframes heart-beat {
    0%, 100% { transform: rotate(45deg) scale(1); }
    50% { transform: rotate(45deg) scale(1.1); }
  }

  #score {
    position: absolute;
    top: 10px;
    right: 20px;
    font-weight: 700;
    color: #b30059;
    font-size: 22px;
    user-select: none;
  }

  #instructions {
    position: absolute;
    top: 10px;
    left: 20px;
    font-size: 14px;
    color: #6a1b4d;
    user-select: none;
  }
</style>
</head>
<body>
<div id="game-container" tabindex="0">
  <div id="score">Puntos: 0</div>
  <div id="instructions">Presiona ESPACIO o toca para saltar</div>
  <div id="ground"></div>
  <div id="heart">
    <div id="eye-left"></div>
    <div id="eye-right"></div>
  </div>
  <div class="obstacle"></div>
</div>

<script>
  const heart = document.getElementById('heart');
  const obstacle = document.querySelector('.obstacle');
  const scoreDisplay = document.getElementById('score');
  const gameContainer = document.getElementById('game-container');

  let isJumping = false;
  let position = 0;
  let score = 0;
  let gameOver = false;

  // Control salto
  function jump() {
    if (isJumping || gameOver) return;
    isJumping = true;

    let upInterval = setInterval(() => {
      if (position >= 100) {
        clearInterval(upInterval);
        let downInterval = setInterval(() => {
          if (position <= 0) {
            clearInterval(downInterval);
            isJumping = false;
            position = 0;
            heart.style.bottom = position + 20 + 'px';
          } else {
            position -= 10;
            heart.style.bottom = position + 20 + 'px';
          }
        }, 20);
      } else {
        position += 10;
        heart.style.bottom = position + 20 + 'px';
      }
    }, 20);
  }

  // Detección de colisión
  function checkCollision() {
    const heartRect = heart.getBoundingClientRect();
    const obstacleRect = obstacle.getBoundingClientRect();

    if (
      heartRect.right > obstacleRect.left + 5 &&
      heartRect.left < obstacleRect.right - 5 &&
      heartRect.bottom > obstacleRect.top + 5 &&
      heartRect.top < obstacleRect.bottom - 5
    ) {
      gameOver = true;
      alert('¡Juego terminado! Tu puntaje: ' + score);
      document.location.reload();
    }
  }

  // Incrementar puntos
  function updateScore() {
    if (!gameOver) {
      score++;
      scoreDisplay.textContent = 'Puntos: ' + score;
    }
  }

  // Juego principal
  function gameLoop() {
    if (gameOver) return;
    checkCollision();
    updateScore();
    requestAnimationFrame(gameLoop);
  }

  gameLoop();

  // Evento salto con teclado y touch
  document.addEventListener('keydown', e => {
    if (e.code === 'Space') {
      e.preventDefault();
      jump();
    }
  });

  gameContainer.addEventListener('touchstart', e => {
    e.preventDefault();
    jump();
  });

  // Hacer el corazón "clickeable" para saltar también
  heart.addEventListener('click', jump);
</script>
</body>
</html>
